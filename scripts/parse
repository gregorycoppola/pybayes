#!/bin/bash
# scripts/parse
# Usage: ./scripts/parse "If Socrates is a man then Socrates is mortal."

set -e

TEXT="$1"

if [ -z "$TEXT" ]; then
    echo "Usage: ./scripts/parse \"your sentence here\""
    exit 1
fi

# Add doc and capture ID
RESULT=$(world doc add "$TEXT")
DOC_ID=$(echo "$RESULT" | grep -oE '[a-f0-9]{12}')

echo "Created: $DOC_ID"
echo ""

# Run all layers
world layer run "$DOC_ID" --all

echo ""

# Show result
world doc json "$DOC_ID"
